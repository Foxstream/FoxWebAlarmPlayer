extends ./MainTemplate.jade

block title
	title Compte utilisateur

block content

	div(class='container-fluid content', ng-controller='accountController')

		div(class='settings-menu', ng-show="showMenu && device !== 'desktop'")
			ul
				li(class="panel")
					h5
						a(href='#', ng-click='showMenu = false', class="block-header")
							span(class="glyphicon glyphicon-cog")
							span Paramètres du compte
				if user.type == 1
					li(class="panel")
						h5
							a(href='/serverview', class="block-header")
								span(class="glyphicon glyphicon-hdd")
								span Serveurs
					li(class="panel")
						h5
							a(href='/userview', class="block-header")
								span(class="glyphicon glyphicon-user")
								span Utilisateurs
				li(class="panel")
					h5
						a(href='/logout', class="block-header")
							span(class="glyphicon glyphicon-off")
							span Déconnexion

		div(ng-show="device === 'desktop' || !showMenu")
			//- Mobile buttons 
			div(class='actions hidden-lg hidden-md')
				button(class='button-secondary',
						ng-click='showMenu = true')
						span(class="glyphicon glyphicon-chevron-left") 
						span Paramètres

			div(class="tabs col-xs-12 col-md-6 col-md-offset-3")
				ul
					li(ng-click="tab = 'loginForm'",
						ng-class="{active: tab==='loginForm'}") Informations affichées
					li(ng-click="tab = 'passwordForm'",
						ng-class="{active: tab==='passwordForm'}") Changer de mot de passe


			div(class="main-element")
				form(method='POST', class='col-xs-12 col-md-6 col-md-offset-3', name="loginForm", ng-show="tab === 'loginForm'")
					div(class="form-group")
						label(for='displayname') Nom affiché
						input(type='text', id='displayname', name='displayname', placeholder='Nom affiché', ng-model="user.displayname", class="form-control", required)
					button(name='PropUpdate', value='1', class="button-primary-fill submit", ng-show="loginForm.$dirty", ng-click="commituser()") Appliquer

				form(method='POST', class='col-xs-12 col-md-6 col-md-offset-3', name="passwordForm", ng-show="tab === 'passwordForm'")
					if user.shouldChangePassword==0
						div(class="form-group")
							label(for='oldpassword') Mot de passe courant
							input(type='password', id='oldpassword', name='oldpassword' placeholder='Mot de passe courant', class="form-control", ng-model="password.old", required)
					div(class="form-group")
						label(for='password1') Nouveau mot de passe
						input(type='password',  id='password1', name='password1' placeholder='Nouveau mot de passe', class="form-control", ng-model="password.new", required)
					div(class="form-group")
						label(for='password2') Confirmer le mot de passe
						input(type='password', id='password2', name='password2' placeholder='Confirmation', class="form-control", ng-model="password.confirm", required)

					button(name='PassUpdate', value='1', class="button-primary-fill submit", ng-click="changepassword()") Enregistrer



	script(src='static/userdb.js')
	script(src='static/accountcontroller.js')
