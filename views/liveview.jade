extends ./MainTemplate.jade

block title
  title Vid√©o en direct

block content
  div(class='container-fluid content')

    div(ng-controller='livecontroller')

        //- Mobile buttons
        div(class='actions hidden-lg hidden-md')
            button(class='button-secondary',
                    ng-click='selectedcamera = undefined',
                    ng-show='selectedcamera !== undefined')
                    span(class="glyphicon glyphicon-chevron-left") 
                    span Retour
        

        div(class='col-xs-12 col-md-10 col-md-offset-1 main-element', id='camera-list', ng-class="{'col-md-10': selectedcamera === undefined, 'col-md-offset-1': selectedcamera === undefined, 'col-md-6': selectedcamera !== undefined}", ng-show="device === 'desktop' || selectedcamera === undefined")
            div(ng-repeat='(site, cams) in cameras track by $index' class='panel')
                h5
                    a(href='#collapse{{$index}}', data-toggle='collapse',
                    class="block-header", data-parent='#camera-list') {{ site }}
                div(id='collapse{{ $index }}',
                    class='collapse')
                        div(class="thumbnails")
                            div(ng-repeat='c in cams | orderBy: "id" track by $index', class="cam")
                                img(src='{{ c.image }}',
                                    ng-click='playlivefeed(site, c.serverId, c.id, 250)',
                                    class='camera-image')
                                h5(class='camera-name') {{ c.name }}

        div(class='live-canvas hidden-xs hidden-sm col-lg-6', 
            ng-class="{'hidden-md': selectedcamera === undefined, 'hidden-lg': selectedcamera === undefined'}")
            liveplayer(imgwidth=300, imgHeight=400, camera="selectedcamera")

        liveswiper(class="hidden-md hidden-lg",
                    ng-show='selectedcamera !== undefined')


    script(src='static/AlarmData.js')
    script(src='static/async.min.js')
    script(src='static/livecontroller.js')
