extends ./MainTemplate.jade

block title
  title User information 

block content
  div(ng-app="alarmviewer", class='container-fluid')
      .h3 User list
      div(ng-controller='usercontroller')    
        table(class='table table-striped table-hover table-responsive', ng-show='currentUser==undefined')
          tr
            th Login
            th Display name
            th Admin
            th Password reset
            th Delete
          tr(ng-repeat='x in users')          
            td {{ x.login }} 
            td {{ x.displayname }} 
            td 
                span(class='glyphicon glyphicon-wrench', ng-show='x.type==1', title='Administrator') 
            td 
                button(ng-click='resetPassword(x.id)', ng-show='x.shouldChangePassword==0', title='Reset password',  class="btn btn-sm btn-default") 
                    span(class='glyphicon glyphicon-lock')
            td 
                button(ng-click='deleteUser(x.id)', title='Delete user',  class="btn btn-sm btn-danger") 
                    span(class='glyphicon glyphicon-trash')

        button(class="btn btn-sm btn-default", ng-click='currentUser=""', ng-show='currentUser==undefined') New user

        div(id='newuser', ng-show='currentUser!=undefined', class="form-input")
            h4(class="form-signin-heading") New user login
            input(type='text', id='login' placeholder='Login', ng-model='currentUser', class="form-control")
            button(ng-click='addCurrentUser()', class="btn btn-sm btn-primary btn-block") Add user
            button(ng-click='currentUser=undefined', class="btn btn-sm btn-default btn-block") Cancel

        div(class='alert alert-warning space-before', ng-show='userMsg !=undefined') {{ userMsg  }}


  script(src='static/angular-1.3.15.min.js')    
  script(src='static/app.js')  
  script(src='static/userviewer.js')  